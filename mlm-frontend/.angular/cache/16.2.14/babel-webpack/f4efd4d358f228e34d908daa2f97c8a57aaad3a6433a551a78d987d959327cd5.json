{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { HttpHeaders } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nexport let TakeHelpComponent = class TakeHelpComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.levels = [];\n    this.selectedLevelData = null;\n  }\n  ngOnInit() {\n    this.fetchMatrixSummary();\n  }\n  fetchMatrixSummary() {\n    const payerId = localStorage.getItem('_id');\n    if (!payerId) {\n      console.error('PayerId not found in localStorage');\n      return;\n    }\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    });\n    this.http.get(`${environment.apiUrl}/payments/getMatrixSummary/${payerId}`, {\n      headers\n    }).subscribe(response => {\n      this.levels = Object.entries(response).map(([key, value]) => ({\n        ...value,\n        level: parseInt(key.replace('level', ''))\n      }));\n      console.log(this.levels);\n    }, error => {\n      console.error('Error fetching matrix summary:', error);\n    });\n  }\n  selectLevel(level) {\n    this.router.navigate(['/level-details', level.level], {\n      state: {\n        levelData: level\n      }\n    });\n  }\n  getProgressWidth(level) {\n    if (level.totalPeople === 0) return '0%';\n    const percentage = level.paidPeople / level.totalPeople * 100;\n    return `${percentage}%`;\n  }\n  getStatusColor(status) {\n    switch (status.toLowerCase()) {\n      case 'locked':\n        return '#e74c3c';\n      case 'unlocked':\n        return '#2ecc71';\n      default:\n        return '#3498db';\n    }\n  }\n};\nTakeHelpComponent = __decorate([Component({\n  selector: 'app-take-help',\n  templateUrl: './take-help.component.html',\n  styleUrls: ['./take-help.component.css']\n})], TakeHelpComponent);","map":{"version":3,"names":["HttpHeaders","Component","environment","TakeHelpComponent","constructor","http","router","levels","selectedLevelData","ngOnInit","fetchMatrixSummary","payerId","localStorage","getItem","console","error","headers","get","apiUrl","subscribe","response","Object","entries","map","key","value","level","parseInt","replace","log","selectLevel","navigate","state","levelData","getProgressWidth","totalPeople","percentage","paidPeople","getStatusColor","status","toLowerCase","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/rugvedraikwar/Desktop/magicHelp/mlm-froentend/mlm-frontend/src/app/take-help/take-help.component.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { environment } from 'src/environments/environment';\n\ninterface LevelSummary {\n  totalPeople: number;\n  paidPeople: number;\n  openPeople: number;\n  level?: number;\n  levelStatus: string;\n}\n\ninterface MatrixSummary {\n  [key: string]: LevelSummary;\n}\n\n@Component({\n  selector: 'app-take-help',\n  templateUrl: './take-help.component.html',\n  styleUrls: ['./take-help.component.css']\n})\nexport class TakeHelpComponent implements OnInit {\n  levels: LevelSummary[] = [];\n  selectedLevelData: LevelSummary | null = null;\n\n  constructor(private http: HttpClient,,private router: Router) {}\n\n  ngOnInit(): void {\n    this.fetchMatrixSummary();\n  }\n\n  fetchMatrixSummary(): void {\n    const payerId = localStorage.getItem('_id');\n    if (!payerId) {\n      console.error('PayerId not found in localStorage');\n      return;\n    }\n\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\n    });\n\n    this.http.get<MatrixSummary>(`${environment.apiUrl}/payments/getMatrixSummary/${payerId}`, { headers })\n      .subscribe(\n        response => {\n          this.levels = Object.entries(response).map(([key, value]) => ({\n            ...value,\n            level: parseInt(key.replace('level', ''))\n          }));\n          console.log(this.levels);\n        },\n        error => {\n          console.error('Error fetching matrix summary:', error);\n        }\n      );\n  }\n\n  selectLevel(level: LevelSummary): void {\n    this.router.navigate(['/level-details', level.level], { state: { levelData: level } });\n  }\n\n  getProgressWidth(level: LevelSummary): string {\n    if (level.totalPeople === 0) return '0%';\n    const percentage = (level.paidPeople / level.totalPeople) * 100;\n    return `${percentage}%`;\n  }\n\n  getStatusColor(status: string): string {\n    switch (status.toLowerCase()) {\n      case 'locked':\n        return '#e74c3c';\n      case 'unlocked':\n        return '#2ecc71';\n      default:\n        return '#3498db';\n    }\n  }\n}"],"mappings":";AAAA,SAAqBA,WAAW,QAAQ,sBAAsB;AAC9D,SAASC,SAAS,QAAgB,eAAe;AACjD,SAASC,WAAW,QAAQ,8BAA8B;AAmBnD,WAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAI5BC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAHpD,KAAAC,MAAM,GAAmB,EAAE;IAC3B,KAAAC,iBAAiB,GAAwB,IAAI;EAEkB;EAE/DC,QAAQA,CAAA;IACN,IAAI,CAACC,kBAAkB,EAAE;EAC3B;EAEAA,kBAAkBA,CAAA;IAChB,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;IAC3C,IAAI,CAACF,OAAO,EAAE;MACZG,OAAO,CAACC,KAAK,CAAC,mCAAmC,CAAC;MAClD;;IAGF,MAAMC,OAAO,GAAG,IAAIhB,WAAW,CAAC;MAC9B,eAAe,EAAE,UAAUY,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;KACzD,CAAC;IAEF,IAAI,CAACR,IAAI,CAACY,GAAG,CAAgB,GAAGf,WAAW,CAACgB,MAAM,8BAA8BP,OAAO,EAAE,EAAE;MAAEK;IAAO,CAAE,CAAC,CACpGG,SAAS,CACRC,QAAQ,IAAG;MACT,IAAI,CAACb,MAAM,GAAGc,MAAM,CAACC,OAAO,CAACF,QAAQ,CAAC,CAACG,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,MAAM;QAC5D,GAAGA,KAAK;QACRC,KAAK,EAAEC,QAAQ,CAACH,GAAG,CAACI,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;OACzC,CAAC,CAAC;MACHd,OAAO,CAACe,GAAG,CAAC,IAAI,CAACtB,MAAM,CAAC;IAC1B,CAAC,EACDQ,KAAK,IAAG;MACND,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACxD,CAAC,CACF;EACL;EAEAe,WAAWA,CAACJ,KAAmB;IAC7B,IAAI,CAACpB,MAAM,CAACyB,QAAQ,CAAC,CAAC,gBAAgB,EAAEL,KAAK,CAACA,KAAK,CAAC,EAAE;MAAEM,KAAK,EAAE;QAAEC,SAAS,EAAEP;MAAK;IAAE,CAAE,CAAC;EACxF;EAEAQ,gBAAgBA,CAACR,KAAmB;IAClC,IAAIA,KAAK,CAACS,WAAW,KAAK,CAAC,EAAE,OAAO,IAAI;IACxC,MAAMC,UAAU,GAAIV,KAAK,CAACW,UAAU,GAAGX,KAAK,CAACS,WAAW,GAAI,GAAG;IAC/D,OAAO,GAAGC,UAAU,GAAG;EACzB;EAEAE,cAAcA,CAACC,MAAc;IAC3B,QAAQA,MAAM,CAACC,WAAW,EAAE;MAC1B,KAAK,QAAQ;QACX,OAAO,SAAS;MAClB,KAAK,UAAU;QACb,OAAO,SAAS;MAClB;QACE,OAAO,SAAS;;EAEtB;CACD;AAxDYrC,iBAAiB,GAAAsC,UAAA,EAL7BxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EACWzC,iBAAiB,CAwD7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}